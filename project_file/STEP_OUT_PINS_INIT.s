;GPIO Registers
GPIO_PORTB_DATA		EQU 0x400053FC ; Access ALL
GPIO_PORTB_CR		EQU 0x40005524 
GPIO_PORTB_LOCK		EQU 0x40005520
GPIO_PORTB_DIR 		EQU 0x40005400 ; Port Direction
GPIO_PORTB_AFSEL	EQU 0x40005420 ; Alt Function enable
GPIO_PORTB_DEN 		EQU 0x4000551C ; Digital Enable
GPIO_PORTB_AMSEL 	EQU 0x40005528 ; Analog enable
GPIO_PORTB_PCTL 	EQU 0x4000552C ; Alternate Functions

SYSCTL_RCGCGPIO 	EQU 0x400FE608 ; GPIO Gate Control
			
;LABEL		DIRECTIVE	VALUE		COMMENT
			AREA    	STEP_OUT_PINS_INIT, READONLY, CODE
			THUMB
			EXPORT  	STEP_OUT_PINS_INIT ; Make available
; PORTB PB0,1,2,3, ARE USED FOR THE STEP MOTOR DRIVER


STEP_OUT_PINS_INIT_	PROC
			LDR		R1, =SYSCTL_RCGCGPIO
			LDR		R0, [R1]
			ORR		R0, #0x02 ; CLOCK PORTB 
			STR		R0, [R1]
			NOP 
			NOP 
			NOP 
			
			
			LDR		R1, =GPIO_PORTB_LOCK 
			LDR 	R0, =0x4C4F434B ; SPECIAL UNLOCK ARRAY
			STR		R0, [R1]
			
			LDR		R1, =GPIO_PORTB_CR
			MOV		R0, #0x0F ; COMMIT PORTS 
			STR		R0, [R1]
			
			LDR		R1, =GPIO_PORTB_DIR 
			STR		R0, [R1] ; SET PB0,1,2,3 AS OUTPUTS 
			
			LDR		R1, =GPIO_PORTB_AFSEL 
			BIC 	R0, #0x0F 
			STR		R0, [R1] ; DISABLE ALTERNATE FUNCTION 
			
			LDR		R1, =GPIO_PORTB_DEN 
			MOV		R0, #0x0F
			STR		R0, [R1] ; DIGITAL ENABLE THE PINS 
			
			LDR		R1, =GPIO_PORTB_DATA 
			MOV 	R0, #0x01 ; 
			STR		R0, [R1]
			BX LR 
			ENDP 
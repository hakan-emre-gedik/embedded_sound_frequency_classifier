NVIC_ST_CTRL		EQU		0xE000E010
NVIC_ST_RELOAD 		EQU 	0xE000E014
NVIC_ST_CURRENT 	EQU 	0xE000E018
SHP_SYSPRI3			EQU 	0xE000ED20 

;LABEL		DIRECTIVE	VALUE		COMMENT
			AREA    	SYSTICK_INIT, READONLY, CODE
			THUMB
			EXPORT  	SYSTICK_INIT ; Make available
			
			
			; SETUP THE SYSTIC TIMER TO GET READING FROM THE ADC
			; MODULE AT 2KHZ OF SAMPLING FREQUENCY. TIMER COUNTS 
			; DOWN AND GENERATES AN INTERRUPT. AT EACH INTERRUPT, 
			; A READING IS TAKEN. 
			; THE SYSTICK IS FED BY THE SYSTEM CLOCK, WHICH IS 16MHZ 
SYSTICK_INIT_	PROC
			
	; SETUP THE TIMER 
				LDR		R1, =NVIC_ST_CTRL ; DISABLE TIMER DURING THE CONFIGURATION 
				LDR 	R0, =0 
				STR		R0, [R1]
				
				LDR		R1, =NVIC_ST_RELOAD ; TAKE THE RELOAD VALUE TO BE 2000-1 FOR 
				LDR		R0, =1999 ; 2 KHZ OF ADC SAMPLING FREQUENCY 
				STR		R0, [R1] 
				
				
				; SET THE PRIORITY LEVEL 
				LDR		R1, =SHP_SYSPRI3 
				LDR		R0, =0x40000000
				STR		R0, [R1]
				
				LDR		R1, =NVIC_ST_CTRL
				LDR		R0, =0x03
				STR		R0, [R1]
				
				BX LR 
				
				ENDP 
			END 